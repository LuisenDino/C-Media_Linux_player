<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Page Title</title>
    <!--<script src='main.js'></script>-->
</head>
<body>
    <script>

        function send_text(){   
               window.api.printer.imprimir(document.getElementById("texto").value);
        }

        function get_paper(){
            
            try{
                window.api.printer.get_paper().then(function(response){
                    document.getElementById("paper_state").innerHTML = response.message
                })
                
            }catch(error){
                document.getElementById("paper_state").innerHTML = error; 
            }
            
        }

        function get_cedula(){
            try{
                window.api.code_reader.get_result().then(function(response){
                    ced = document.getElementById("cedula");
                    ced.innerHTML = '<button id="get_cedula", onclick="get_cedula()">Obtener Cedula</button>'
                    if(typeof response == "object"){
                        table = document.createElement("table");
                        tbody = document.createElement("tbody");
                        Object.keys(response).forEach(function(element){
                            trow = document.createElement("tr");
                            th = document.createElement("th");
                            th.innerHTML = element;
                            cedula = document.createElement("td")
                            cedula.innerHTML = response[element]
                            trow.appendChild(th)
                            trow.appendChild(cedula)
                            tbody.appendChild(trow)
                        })

                        table.appendChild(tbody)
                        ced.appendChild(table)
                    }else{
                        p = document.createElement("p")
                        p.innerHTML = response
                        ced.appendChild(p)
                    }
                })}
            catch(error){
                document.getElementById("paper_state").innerHTML = error; 
            }
        }
    </script>
    <h1>Hola Mundo!</h1>
    <div>
        <textarea id="texto" rows="15" cols="20" wrap="soft"></textarea>
        <button id="print" onclick="send_text()">Print</button>
    </div>
    <div>
        <p id="paper_state">Hola</p>
        <button id="paper", onclick="get_paper()">Estado del papel</button>
    </div>
    <div id="cedula">
        <button id="get_cedula", onclick="get_cedula()">Obtener Cedula</button>
    </div>

</body>
</html>